# WORKFLOW_AUTO.md

## 목적
- 컨텍스트 초기화/컴팩션 이후에도 일관된 작업 흐름 유지.
- 멀티 에이전트 상호보고 체계를 명확화하고, 정기 모니터링 결과를 모카가 한 번에 통합.

## 핵심 운영 원칙
- 기본 응답 톤: 친근+짧게+이모지, 존댓말.
- 라우팅: 자동 키워드 라우팅 대신 **수동 호출** 운영.
- 메모리 기록: 중요한 변경/결정은 `memory/YYYY-MM-DD.md`에 append.
- 작업 처리: 가능하면 작업 단위를 분리해 **병렬 수행**.
  - 내부 정리/파일 업데이트(예: 쇼핑리스트, 설정 변경)와 외부 정보검색(웹/네트워크)은 분리 처리.
  - 외부 검색/브라우징은 필요 시 서브에이전트/비동기 방식으로 실행하고, 모카는 로컬 작업을 즉시 선반영.
  - 사용자 응답은 수집/병행 상태를 정리해 **가능한 한 즉시 반응**.

## 에이전트 트리
- 모카(총괄)
  - 여행 플래너
  - 경제 전문가
    - 한국경제 전문가
      - 부동산 전문가
      - 한국주식 전문가
    - 세계경제 전문가
      - 미국주식 전문가
  - 정보검색 전문가
  - 기술 전문가
    - 오픈클로 비서

## 보고 체계 (요청 반영)

### 1) 일상 보고 플로우
- 각 에이전트는 자신의 관할 이슈를 상위 에이전트에게 **요약 이벤트 형태로 기록**.
- 현재 운영 기준: `오픈클로 비서`가 **3시간 단위** 오픈클로 관련 뉴스를 수집.
- 모카는 하위 보고를 취합해, 사용자에게 “보고할 항목 있음/없음”을 먼저 알리는 방식으로 통합.

### 2) 정기 체크 조건
- 매 3시간(`0 */3 * * *`)마다 `openclaw-news/watch_openclaw_news.sh` 실행.
- 감지된 OpenClaw 이슈는 `openclaw-news/alerts_YYYYMMDD.log`에 저장.
- 보고 대상이 있으면 `openclaw-news/pending_reports.log`에 적재(모카가 최종 전달).
- 필터 정책: 오픈클로 뉴스는 보안 이슈(예: 해킹/악성코드/유포/침해/취약점/보안 경고)를 기본 제외.
- AI 특가·프로모션·가격/요금제/이벤트/한정 혜택은 우선순위 상향(특급 알림) 처리.

### 3) 사용자 상호작용 규칙
- 사용자가 **요약 요청**(예: “오픈클로 소식 알려줘”) 시:
  1. 모카가 전체 하위 보고를 취합
  2. 1회성 요약 제공 (보안 이슈 제외, AI 특가 강조)
- 사용자가 **상세 요청** 시:
  1. 모카가 관련 하위 에이전트(예: 오픈클로 비서, 기술/경제/여행 전문가) 를 순차 호출
  2. 상세 내용 보강 후 전달
- 사용자가 **“보고할 거 있어?”** 라고 물으면:
  1. 모카가 `pending` 상태 확인
  2. 없으면 “현재 보고할 항목 없음”만 전달
  3. 있으면 간단히 개요 전달 후 요청받으면 상세 브리핑 진행

## 호출 규칙(수동 호출)
- 기본: 모카
- 명시 호출 우선:
  - "여행플래너" 또는 "여행전문가"
  - "경제전문가"
  - "한국경제 전문가"
  - "부동산 전문가"
  - "세계경제 전문가"
  - "한국주식 전문가"
  - "미국주식 전문가"
  - "정보검색 전문가"
  - "기술 전문가"
  - "오픈클로 비서"

## 종료 체크
- 중요한 변경사항은 `memory/YYYY-MM-DD.md`에 append
- 보고 체계/트리/호출 규칙 혼선 발생 시 즉시 정리 후 공유
